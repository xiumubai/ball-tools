page {
  background-color: #1a1a1a;
  /* 地毯纹理 */
  background-image: 
    radial-gradient(#222 15%, transparent 16%),
    radial-gradient(#222 15%, transparent 16%);
  background-size: 20px 20px;
  background-position: 0 0, 10px 10px;
  height: 100vh;
  overflow: hidden;
}

.container {
  height: 100%;
  position: relative;
  display: flex;
  justify-content: center; /* 水平居中 */
  align-items: flex-start; /* 改为顶部对齐 */
  padding-top: 40rpx; /* 增加顶部边距，使球桌不至于顶到最上面 */
}

/* 顶部 Undo 按钮 */
.top-toolbar {
  position: fixed;
  top: calc(100vh - 70%);
  left: 10rpx;
  z-index: 90; /* 低于抽屉 */
}

.undo-btn {
  background: rgba(43, 43, 43, 0.5);
  padding: 16rpx 24rpx;
  border-radius: 40rpx;
  display: flex;
  align-items: center;
  gap: 12rpx;
  color: #fff;
  font-size: 24rpx;
  box-shadow: 0 4rpx 10rpx rgba(0,0,0,0.3);
}

.undo-btn:active {
  background: rgba(43, 43, 43, 0.7);
  transform: scale(0.95);
}

/* 左侧抽屉式工具栏 */
.sidebar-drawer {
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: 100;
  pointer-events: none; /* 默认不拦截，让toggle按钮拦截 */
  display: flex;
  align-items: center; /* 垂直居中对齐toggle */
}

.sidebar-drawer.expanded {
  pointer-events: auto; /* 展开后拦截所有点击 */
  background: rgba(0,0,0,0.5); /* 遮罩层效果可选 */
  width: 100%; /* 全屏遮罩 */
}

/* 触发按钮 */
.drawer-toggle {
  width: 60rpx;
  height: 100rpx;
  background: rgba(43, 43, 43, 0.5);
  border-top-right-radius: 16rpx;
  border-bottom-right-radius: 16rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: auto; /* 必须开启 */
  box-shadow: 4rpx 0 10rpx rgba(0,0,0,0.3);
}

/* 抽屉内容区域 */
.drawer-content {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 160rpx; /* 较窄的侧边栏 */
  background: #2b2b2b;
  transform: translateX(-100%);
  transition: transform 0.3s ease;
  display: flex;
  flex-direction: column;
  box-shadow: 4rpx 0 20rpx rgba(0,0,0,0.5);
  pointer-events: auto;
}

.sidebar-drawer.expanded .drawer-content {
  transform: translateX(0);
}

.drawer-header {
  height: 88rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  border-bottom: 1rpx solid rgba(255,255,255,0.1);
}

.drawer-body {
  flex: 1;
  overflow-y: auto;
  padding: 20rpx 0;
}

.tool-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 20rpx;
}

.section-title {
  font-size: 22rpx;
  color: #888;
  margin-bottom: 16rpx;
}

.tool-btn {
  width: 100rpx;
  height: 100rpx;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin-bottom: 16rpx;
  border-radius: 16rpx;
  color: #ccc;
  font-size: 22rpx;
  gap: 8rpx;
  background: #3e3e3e;
}

.tool-btn.active {
  background: rgba(59, 130, 246, 0.2);
  color: #3B82F6;
  border: 1rpx solid rgba(59, 130, 246, 0.5);
}

/* 画线模式下的子选项 */
.sub-options {
  display: flex;
  flex-direction: column;
  gap: 12rpx;
  margin-top: -10rpx;
  margin-bottom: 16rpx;
  background: rgba(0,0,0,0.2);
  padding: 12rpx;
  border-radius: 12rpx;
}

.sub-btn {
  width: 80rpx;
  height: 60rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20rpx;
  color: #999;
  border-radius: 8rpx;
  background: rgba(255,255,255,0.05);
}

.sub-btn.active {
  background: #3B82F6;
  color: #fff;
}


.divider {
  height: 1rpx;
  background: rgba(255,255,255,0.1);
  margin: 10rpx 20rpx 30rpx;
}

/* 球网格 */
.ball-grid {
  display: grid;
  grid-template-columns: 1fr 1fr; /* 两列 */
  gap: 16rpx;
  padding: 0 16rpx;
}

.ball-grid-item {
  display: flex;
  justify-content: center;
}

.ball-icon {
  width: 50rpx; /* 稍微缩小以适应 */
  height: 50rpx;
  border-radius: 50%;
  box-shadow: 2rpx 2rpx 4rpx rgba(0,0,0,0.4);
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 复用球的样式逻辑 */
.ball-icon::after {
  content: '';
  position: absolute;
  top: 6rpx;
  left: 6rpx;
  width: 10rpx;
  height: 6rpx;
  background: rgba(255,255,255,0.4);
  border-radius: 50%;
  transform: rotate(-45deg);
}

/* 修复球号码居中问题 */
.ball-inner {
  width: 22rpx;
  height: 22rpx;
  font-size: 14rpx;
  background: rgba(255,255,255,0.8);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #000;
  font-weight: bold;
  line-height: 22rpx; /* 确保垂直居中 */
  text-align: center; /* 确保水平居中 */
}


/* 竖向球桌容器 */
.table-container-portrait {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: flex-start; /* 顶部对齐 */
  justify-content: center;
  padding: 40rpx; 
  padding-top: 20rpx; /* 减少内部顶部padding */
  box-sizing: border-box;
  margin-left: 0; 
  transition: margin-left 0.3s;
}

/* 竖向球桌 */
.pool-table-portrait {
  width: 680rpx; 
  height: 1200rpx; 
  /* 外部木质边框 (Outer Rail) */
  /* background: #3e2723;  */
  /* 简单的木纹理 */
  background-image: linear-gradient(90deg, 
    rgba(255,255,255,0.03) 0%, 
    transparent 5%, 
    rgba(0,0,0,0.1) 10%, 
    transparent 15%, 
    rgba(255,255,255,0.03) 20%,
    transparent 100%
  );
  border-radius: 32rpx;
  position: relative;
  /* 整体投影 */
  padding: 0; 
  box-sizing: border-box;
}

.table-felt {
  width: 100%;
  height: 100%;
  /* 绿色台呢 (Table Bed) */
  background: radial-gradient(circle at 50% 40%, #2e7d32 0%, #1b5e20 100%);
  position: relative;
  
  /* 
     关键修改：
     使用 box-shadow 模拟库边胶条 (Cushion)
     向外扩展 50rpx，形成“半绿”效果
     颜色比台面稍深，模拟立体感
  */
  box-shadow: 
    /* 内部阴影，增加台面下陷感 */
    inset 0 0 30rpx rgba(0,0,0,0.5),
    /* 绿色库边 (Cushion) - 向外扩展 */
    0 0 0 50rpx #1a3c25,
    /* 库边与木框的接缝阴影 */
    0 0 4rpx 52rpx rgba(0,0,0,0.3);
    
  /* 移除之前的 border，改用 shadow 扩展 */
  border: none;
  border-radius: 8rpx; /* 稍微圆润一点的内角 */
  box-sizing: border-box;
}

/* 库边 Logo */
.cushion-logo {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  color: #FFD700;
  font-size: 14rpx;
  font-weight: bold;
  font-family: sans-serif;
  letter-spacing: 1rpx;
  z-index: 5;
  opacity: 0.7;
}
/* Logo 位置调整，因为增加了外扩的 Cushion */
.logo-top { top: -36rpx; transform: translateX(-50%) rotate(180deg); }
.logo-bottom { bottom: -36rpx; }

/* 竖向袋口 - 极简深邃风格 */
.pocket {
  position: absolute;
  width: 56rpx; /* 统一直径 */
  height: 56rpx;
  background: #000;
  border-radius: 50%;
  z-index: 2;
  box-shadow: inset 0 0 16rpx rgba(0,0,0,0.9); 
}

/* 
   调整袋口位置 
   需要覆盖掉扩展出来的绿色 Cushion，使袋口看起来是“切断”了库边
   Offset 约为 Cushion 宽度的一半左右
*/
.p-top-left { top: -28rpx; left: -28rpx; }
.p-top-right { top: -28rpx; right: -28rpx; }

.p-middle-left { 
  top: 50%; left: -44rpx; transform: translateY(-50%); 
  /* 完整圆形 */
  border-radius: 50%;
}
.p-middle-right { 
  top: 50%; right: -44rpx; transform: translateY(-50%); 
  border-radius: 50%;
}

.p-bottom-left { bottom: -28rpx; left: -28rpx; }
.p-bottom-right { bottom: -28rpx; right: -28rpx; }

/* 竖向开球线 (下方 25%) */
.head-string-portrait {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 25%;
  height: 2rpx;
  background: rgba(255,255,255,0.2);
}

/* 竖向置球点 (上方 25%) */
.foot-spot-portrait {
  position: absolute;
  left: 50%;
  top: 25%;
  width: 8rpx;
  height: 8rpx;
  background: rgba(0,0,0,0.3);
  border-radius: 50%;
  transform: translate(-50%, -50%);
}

/* Canvas 画线层 */
.draw-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 20; 
  pointer-events: none; 
}

.draw-canvas.active {
  pointer-events: auto; 
}

/* 球的样式复用 */
.ball-wrapper {
  width: 40rpx; 
  height: 40rpx;
  z-index: 10;
}

.ball {
  width: 40rpx;
  height: 40rpx;
  border-radius: 50%;
  box-shadow: 2rpx 2rpx 6rpx rgba(0,0,0,0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

/* 颜色定义 */
.ball-0 { background: #fff; }
.ball-0 .ball-inner { display: none; }
.ball-8 { background: #000; }
.ball-8 .ball-inner { background: #fff; color: #000; }

.ball-1, .ball-9 { background: #FFD700; } 
.ball-2, .ball-10 { background: #0052D9; } 
.ball-3, .ball-11 { background: #FF4D4F; } 
.ball-4, .ball-12 { background: #722ED1; } 
.ball-5, .ball-13 { background: #FA8C16; } 
.ball-6, .ball-14 { background: #52C41A; } 
.ball-7, .ball-15 { background: #A52A2A; } 

.ball-stripe {
  background: #fff;
  overflow: hidden;
}

.ball-stripe.ball-9 { background: linear-gradient(to right, #fff 15%, #FFD700 15%, #FFD700 85%, #fff 85%); }
.ball-stripe.ball-10 { background: linear-gradient(to right, #fff 15%, #0052D9 15%, #0052D9 85%, #fff 85%); }
.ball-stripe.ball-11 { background: linear-gradient(to right, #fff 15%, #FF4D4F 15%, #FF4D4F 85%, #fff 85%); }
.ball-stripe.ball-12 { background: linear-gradient(to right, #fff 15%, #722ED1 15%, #722ED1 85%, #fff 85%); }
.ball-stripe.ball-13 { background: linear-gradient(to right, #fff 15%, #FA8C16 15%, #FA8C16 85%, #fff 85%); }
.ball-stripe.ball-14 { background: linear-gradient(to right, #fff 15%, #52C41A 15%, #52C41A 85%, #fff 85%); }
.ball-stripe.ball-15 { background: linear-gradient(to right, #fff 15%, #A52A2A 15%, #A52A2A 85%, #fff 85%); }