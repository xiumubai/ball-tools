<view class="container cn-padding">
  <!-- Header -->
  <view class="header">
    <view class="h1">比赛大厅</view>
    <view class="p">选择比赛模式，或继续进行中的比赛</view>
  </view>

  <!-- 8 Ball Card -->
  <view class="card" bindtap="startEightBall">
    <view class="card-content">
      <view class="card-header">
        <view class="icon-box green">
          <t-icon name="chart-ring-1" size="32rpx" />
        </view>
        <text class="card-title">中式黑八</text>
      </view>
      <text class="card-desc">标准8球规则，支持炸清/接清统计</text>
    </view>
    <view class="arrow-btn">
      <t-icon name="chevron-right" size="40rpx" />
    </view>
    <view class="highlight-circle green"></view>
  </view>

  <!-- 9 Ball Grid -->
  <view class="grid-2">
    <!-- 2 Players -->
    <view class="small-card" bindtap="startNineBall">
      <view class="small-card-header">
        <view class="icon-box orange">
          <t-icon name="usergroup" size="28rpx" />
        </view>
        <text class="small-card-title">9球两人追分</text>
      </view>
      <text class="small-card-desc">2人对战模式</text>
      <view class="highlight-circle"></view>
    </view>

    <!-- 3 Players -->
    <view class="small-card" bindtap="startNineBallThree">
      <view class="small-card-header">
        <view class="icon-box orange">
          <t-icon name="usergroup" size="28rpx" />
        </view>
        <text class="small-card-title">9球三人追分</text>
      </view>
      <text class="small-card-desc">3人混战模式</text>
      <view class="highlight-circle"></view>
    </view>
  </view>

  <!-- Ongoing Section -->
  <view class="section-label">
    <view class="dot"></view>
    <text>正在进行 ({{ongoingMatches.length}})</text>
  </view>

  <block wx:if="{{ongoingMatches.length}}">
    <view class="ongo-list">
      <block wx:for="{{ongoingMatches}}" wx:key="id">
        <view class="card">
          <view class="card-content">
            <view class="card-header">
              <view class="icon-box {{item.mode === '中式黑八' ? 'green' : 'orange'}}">
                <t-icon name="{{item.mode === '中式黑八' ? 'chart-ring-1' : 'usergroup'}}" size="32rpx" />
              </view>
              <text class="card-title">{{item.mode}}</text>
              <t-tag size="small" variant="light" theme="{{item.mode === '中式黑八' ? 'success' : 'warning'}}" style="margin-left: 12rpx;">{{item.playersCount}}人</t-tag>
            </view>
            <view class="card-desc">开始于 {{item.startTime}}</view>
          </view>
          
          <view class="ongo-actions">
            <view class="btn-continue" catchtap="continueMatch" data-id="{{item.id}}">
              <text>继续</text>
            </view>
            <view class="btn-del" catchtap="deleteMatch" data-id="{{item.id}}">
              <t-icon name="delete" size="32rpx" />
            </view>
          </view>
        </view>
      </block>
    </view>
  </block>
  <block wx:else>
    <view class="empty-state">
      <t-icon name="assignment" size="36rpx" color="#64748b" />
      <text>暂无进行中的比赛</text>
    </view>
  </block>
</view>
